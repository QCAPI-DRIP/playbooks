    
---        
- hosts: localhost
  gather_facts: true

  tasks:
    - name: Add vars to dummy host
      add_host:
        name: "k8s_deploy_vars_holder" 
        k8s_namespace: "{{ ansible_env.K8s_NAMESPACE }}"   
        
- hosts: master
  vars:
    k8s_namespace: "{{ hostvars['k8s_deploy_vars_holder']['k8s_namespace'] }}"
  
  tasks:   
    - pip:
        name:
            - openshift==0.11.0
            - kubernetes==11.0.0
    
    - name: Get a list of all service objects
      k8s_info:
        api_version: v1
        kind: Service
        namespace: "{{ k8s_namespace }}"
      register: k8s_services        
             
    - name: Print k8s_services
      debug:
        var: "{{ k8s_services }}"     
